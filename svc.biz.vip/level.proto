syntax = "proto3";

package svc.biz.vip;
import "google/protobuf/empty.proto";

option go_package="./svc.biz.vip;vip";

// 等级
service Level {
	// ReLoadLevelConf 重载等级配置
	rpc ReLoadLevelConf (google.protobuf.Empty) returns (google.protobuf.Empty) {}
    // GetMemberLevel 获取成员等级
    rpc GetMemberLevel (GetMemberLevelReq) returns (GetMemberLevelResp) {}

	// GetConfList 获取等级配置列表
	rpc GetConfList (google.protobuf.Empty) returns (GetConfListResp) {}
	// AddConf 添加等级配置
	rpc AddConf (AddConfReq) returns (google.protobuf.Empty) {}
	// UpdateConf 更新等级配置（按照level字段更新）
	rpc UpdateConf (UpdateConfReq) returns (google.protobuf.Empty) {}
}

message LevelInfo {
	string member_id = 1;
	int32 level = 2;
	int64 exp = 3;
	int64 exp_current_level = 4; // 当前等级所需经验
	int64 exp_next_level = 5; // 下一等级所需经验
}

message GetMemberLevelReq {
	string member_id = 1;
}
message GetMemberLevelResp {
	LevelInfo level_info = 1;
}


message LevelConf {
	int32 level = 1;
	int64 min_exp = 2;
	int64 max_exp = 3;
}

message GetConfListResp {
	repeated LevelConf conf_list = 1;
}

message AddConfReq {
	LevelConf conf = 1;
}

message UpdateConfReq {
	LevelConf conf = 1;
}